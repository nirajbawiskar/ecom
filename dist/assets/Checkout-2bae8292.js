import{G as u,g as v,i as f,d as g,r as m,k as y,j as e,l as C,p as b}from"./index-17db9675.js";import{u as N,c as F,a as i}from"./index.esm-86351c04.js";import{F as t}from"./Form-be8cfeec.js";import{a as S}from"./index-ad339196.js";import{O as E}from"./OrderSummery-0b7b3f45.js";import{C as O}from"./Container-49a8a690.js";import{F as p}from"./FormControl-7c1b543c.js";import"./index-a6d84f34.js";import"./ElementChildren-c3e6efde.js";import"./Col-c6a039a2.js";import"./iconBase-bf87411a.js";const I=()=>{const[h,{isSuccess:d,isLoading:x}]=u(),{cart:a}=v(s=>s.bag),l=f(),c=g(),r=N({initialValues:{address:"",city:"",payment:""},validationSchema:F({address:i().required("Enter  address"),city:i().required("Enter  city"),payment:i().required("Choose  payment")}),onSubmit:(s,{resetForm:o})=>{h({...s,products:a.map(j=>j._id)}),o()}}),n=s=>b({"form-control my-2":!0,"is-invalid":r.touched[s]&&r.errors[s],"is-valid":r.touched[s]&&!r.errors[s]});return m.useEffect(()=>{a.length===0&&l("/")},[]),m.useEffect(()=>{d&&(c(y()),l("/success"))},[d]),x?e.jsxs(e.Fragment,{children:["Please wait...",e.jsx(Spinner,{})]}):e.jsx(O,{Col:12,children:e.jsx("form",{onSubmit:r.handleSubmit,children:e.jsxs("div",{className:"d-flex justify-content-between  gap-5",children:[e.jsx("div",{Col:6,className:"bg-light w-50 p-3",children:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(p,{...r.getFieldProps("address"),className:n("address"),placeholder:"Enter Address"}),e.jsx(p,{...r.getFieldProps("city"),className:n("city"),placeholder:"Enter City"}),e.jsx(t.Check,{...r.getFieldProps("payment"),type:"radio",name:"payment",id:"cod",value:"cod",label:"COD"}),e.jsx(t.Check,{...r.getFieldProps("payment"),type:"radio",name:"payment",id:"online",value:"online",label:"ONLINE"})]})})}),e.jsxs("div",{Col:6,className:"bg-light w-50 ",children:[e.jsx("h5",{className:"mt-3",children:"Order Summary"}),e.jsxs("div",{children:[a&&e.jsx("div",{className:"w-50",children:e.jsx("div",{className:"bg-light",children:a.map(s=>e.jsxs("div",{className:"d-flex gap-4 p-1 mt-3",children:[e.jsx("div",{children:e.jsx("img",{src:s.hero,alt:"",height:200,width:200})}),e.jsxs("div",{children:[e.jsx("p",{children:s.name}),e.jsx("p",{children:"Black"}),e.jsxs("p",{children:[" ",s.desc," | Large"]}),e.jsxs("p",{className:"pb-5",children:["$",s.price]})]}),e.jsx("span",{onClick:o=>c(C(s)),children:e.jsx(S,{})}),e.jsx("div",{children:e.jsxs(t.Select,{className:"text-dark",children:[e.jsx("option",{value:s.qty}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"})]})})]}))})}),e.jsx("hr",{}),e.jsx("div",{children:e.jsx(E,{showCheckout:!1})}),e.jsx("div",{class:"card-footer",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Confirm Order"})})]})]})]})})})};export{I as default};
